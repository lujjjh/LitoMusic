import { useCallback } from 'react'
import styled from 'styled-components'
import { useLyricsContext } from '../Lyrics'

const Wrapper = styled.div`
  position: relative;
  input[type='checkbox'] {
    display: block;
    box-sizing: border-box;
    width: 30px;
    height: 28px;
    margin: 0;
    border-radius: 5px;
    appearance: none;
    &:hover,
    &:checked {
      background-color: rgba(0, 0, 0, 0.06);
    }
    &:active {
      background-color: rgba(0, 0, 0, 0.1);
    }
    & + svg {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 18px;
      height: 18px;
      transform: translate(-50%, -50%);
      opacity: 0.7;
      pointer-events: none;
    }
    &:active + svg,
    &:checked + svg {
      opacity: 1;
    }
    &:checked + svg {
      fill: #fff;
    }
  }
`

const LyricsButton = () => {
  const { visible, setVisible } = useLyricsContext()
  const handleChange = useCallback(() => {
    setVisible(!visible)
  }, [visible, setVisible])
  return (
    <Wrapper>
      <input type="checkbox" checked={visible} onChange={handleChange} />
      <svg viewBox="0 0 1024 1024">
        <path d="M303.286857 955.355429c21.430857 0 36.004571-11.154286 61.714286-34.285715l148.297143-131.565714h274.706285c127.707429 0 196.278857-70.710857 196.278858-196.297143V264.923429c0-125.568-68.571429-196.278857-196.278858-196.278858H235.995429c-127.268571 0-196.278857 70.290286-196.278858 196.278858v328.283428c0 126.006857 68.992 196.297143 196.278858 196.297143h20.571428v111.414857c0 33.005714 17.152 54.436571 46.72 54.436572z m17.554286-78.427429V752.64c0-23.131429-8.557714-32.146286-32.128-32.146286h-52.297143c-86.985143 0-127.707429-44.141714-127.707429-127.707428v-327.862857c0-83.565714 40.722286-127.268571 127.725715-127.268572h551.570285c86.564571 0 127.268571 43.702857 127.268572 127.268572v327.862857c0 83.565714-40.704 127.707429-127.268572 127.707428H510.281143c-23.570286 0-35.986286 3.437714-52.297143 20.150857z m-5.558857-468.004571c0 47.140571 29.147429 83.565714 76.288 83.565714 17.152 0 34.285714-2.980571 45.001143-16.274286h3.437714c-15.433143 33.865143-46.72 55.716571-73.728 62.573714-15.414857 4.278857-20.132571 11.154286-20.132572 20.992 0 10.715429 8.557714 18.870857 20.571429 18.870858 42.002286 0 125.568-49.737143 125.568-154.294858 0-56.137143-36.425143-99.437714-90.002286-99.437714-49.718857 0-87.003429 34.724571-87.003428 84.004572z m222.866285 0c0 47.140571 29.129143 83.565714 76.288 83.565714 17.133714 0 34.285714-2.980571 44.982858-16.274286h3.437714c-15.433143 33.865143-46.72 55.716571-73.709714 62.573714-15.433143 4.278857-20.150857 11.154286-20.150858 20.992 0 10.715429 8.576 18.870857 20.571429 18.870858 42.002286 0 125.988571-49.737143 125.988571-154.294858 0-56.137143-36.845714-99.437714-90.404571-99.437714-49.737143 0-87.003429 34.724571-87.003429 84.004572z" />
      </svg>
    </Wrapper>
  )
}

export default LyricsButton
